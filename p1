CREATE TABLE PUBLISHER
(NAME VARCHAR (20) PRIMARY KEY, 
PHONE INTEGER,
ADDRESS VARCHAR (20));

CREATE TABLE BOOK
(BOOK_ID INTEGER PRIMARY KEY, 
TITLE VARCHAR(20),
PUB_YEAR VARCHAR(20),
PUBLISHER_NAME VARCHAR(20),
FOREIGN KEY(PUBLISHER_NAME) REFERENCES PUBLISHER (NAME) ON DELETE CASCADE);

CREATE TABLE BOOK_AUTHORS (AUTHOR_NAME 
VARCHAR (20),
BOOK_ID INTEGER,
FOREIGN KEY(BOOK_ID) REFERENCES
BOOK(BOOK_ID) ON DELETE CASCADE, 
PRIMARY KEY (BOOK_ID, AUTHOR_NAME));

CREATE TABLE LIBRARY_PROGRAMME 
(PROGRAMME_ID INTEGER PRIMARY KEY, 
PROGRAMME_NAME VARCHAR(50), 
ADDRESS VARCHAR2 (50));

CREATE TABLE BOOK_COPIES(NO_OF_COPIES INTEGER,
BOOK_ID INTEGER ,
FOREIGN KEY(BOOK_ID) REFERENCES BOOK (BOOK_ID) ON DELETE CASCADE, 
PROGRAMME_ID INTEGER,
FOREIGN KEY(PROGRAMME_ID) REFERENCES LIBRARY_ PROGRAMME 
(PROGRAMME _ID) ON DELETECASCADE,
PRIMARY KEY (BOOK_ID, PROGRAMME _ID));

CREATE TABLE CARD(CARD_NO INTEGER PRIMARY KEY);

CREATE TABLE BOOK_LENDING (DATE_OUT DATE,
DUE_DATE DATE,
BOOK_ID INTEGER,
FOREIGN KEY(BOOK_ID) REFERENCES BOOK (BOOK_ID) ON DELETE 
CASCADE,
PROGRAMME_ID INTEGER,
FOREIGN KEY(PROGRAMME_ID) REFERENCESLIBRARY_ PROGRAMME
(PROGRAMME _ID) ON DELETECASCADE, 
CARD_NO INTEGER);

1.
SELECT B.BOOK_ID, B.TITLE, B.PUBLISHER_NAME, A.AUTHOR_NAME, 
C.NO_OF_COPIES, L. PROGRAMME _ID
FROM BOOK B, BOOK_AUTHORS A, BOOK_COPIES C, LIBRARY_ 
PROGRAMME L
WHERE B.BOOK_ID=A.BOOK_ID
AND B.BOOK_ID=C.BOOK_ID
AND L. PROGRAMME _ID=C. PROGRAMME _ID;

2.
SELECT CARD_NO 
FROM BOOK_LENDING
WHERE DATE_OUT BETWEEN ’01-JAN-2017’ AND ’01-JUL-2017’ 
GROUP BY CARD_NO
HAVING COUNT (*)>3;

3.
DELETE FROM BOOK 
WHERE BOOK_ID=3;

4.
CREATE VIEWV_PUBLICATION AS 
SELECT PUB_YEAR
FROM BOOK;

5.
CREATE VIEW V_BOOKS AS
SELECT B.BOOK_ID, B.TITLE, C.NO_OF_COPIES 
FROM BOOK B, BOOK_COPIES C,
LIBRARY_ PROGRAMME L
WHERE B.BOOK_ID=C.BOOK_ID AND
C. PROGRAMME _ID=L.PROGRAMME _ID;
